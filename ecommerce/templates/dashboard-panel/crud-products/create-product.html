{% extends 'dashboard-panel/dashboard.html' %}
{% load static %}

{% block content %}
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<div class="main-content">
  <div style="max-width: 800px; background: #F2E8D5; 
              padding: 30px; border-radius: 15px; 
              border: solid 0.5px #D8C3A5;
              box-shadow: 0 4px 8px rgba(216, 195, 165, 0.5);
              margin-left: 20px;">
    <h2 style="color: #5A3E2B; margin-bottom: 25px;">Crear Nuevo Producto</h2>
    
    <form method="post" action="{% url 'create-product' %}" enctype="multipart/form-data">
        {% csrf_token %}
    
        <div class="row">
            <!-- Columna izquierda -->
            <div class="col-md-6">
                <div class="mb-3">
                    <label style="color: #5A3E2B;" for="name" class="form-label">Nombre del Producto</label>
                    <input type="text" class="form-control" id="name" name="name" 
                           placeholder="Ingresa el nombre del producto"
                           required
                           minlength="8"
                           maxlength="250">
                </div>

                <div class="mb-3">
                    <label style="color: #5A3E2B;" for="description" class="form-label">Descripción</label>
                    <textarea class="form-control" id="description" name="description" 
                              rows="3" placeholder="Escribe una descripción..."
                              required
                              minlength="8"
                              maxlength="250"></textarea>
                </div>
                
                <div class="mb-3">
                    <label style="color: #5A3E2B;" for="brand" class="form-label">Marca</label>
                    <select class="form-control" id="brand" name="brand">
                        <option value="">Selecciona una marca</option>
                        {% for brand in brands %}
                            <option value="{{ brand.id }}">
                                {{ brand.name }}
                            </option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            
            <!-- Columna derecha -->
            <div class="col-md-6">
                <div class="mb-3">
                    <label style="color: #5A3E2B;" for="price" class="form-label">Precio</label>
                    <input type="number" class="form-control" id="price" name="price" 
                           placeholder="Ej: 9990"
                           required
                           min="1"
                           max="9999999">
                </div>

                <div class="mb-3">
                    <label style="color: #5A3E2B;" for="image" class="form-label">Imagen del Producto (URL)</label>
                    <input type="url" class="form-control" id="image" name="image" 
                           placeholder="https://ejemplo.com/imagen.jpg"
                           required>
                </div>
                
                <div class="mb-3">
                    <label style="color: #5A3E2B;" for="categories" class="form-label">Categorías</label>
                    <select class="form-control" id="categories" name="categories" multiple>
                        {% for category in categories %}
                            <option value="{{ category.id }}">
                                {{ category.name }}
                            </option>
                        {% endfor %}
                    </select>
                    <small class="form-text text-muted">Mantén presionado Ctrl para seleccionar múltiples categorías</small>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <button type="submit" class="btn btn-primary me-md-2">Crear Producto</button>
                    <a href="{% url 'list-products' %}" class="btn btn-secondary">Cancelar</a>
                </div>
            </div>
        </div>
    </form>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script>
$(document).ready(function() {
    $('#categories').select2({
        placeholder: "Selecciona categorías",
        allowClear: true
    });
});
</script>


<style>
  .main-content {
    margin-left: 280px; /* Igual al ancho del sidebar */
    padding: 20px;
  }
  
  .sidebar {
    position: fixed;
    height: 100%;
    top: 0;
    left: 0;
  }
  
  @media (max-width: 768px) {
    .main-content {
      margin-left: 0;
    }
    
    .sidebar {
      width: 100%;
      position: relative;
    }
  }
</style>
{% endblock %}