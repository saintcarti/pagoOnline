{% extends 'dashboard-panel/dashboard.html' %}
{% load static %}

{% block content %}
<div class="main-content">
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h2 class="h2">Administración de Productos</h2>
    <div class="btn-toolbar mb-2 mb-md-0">
      <a href="{% url 'create-product' %}" class="btn btn-sm btn-success">
        <i class="fas fa-plus"></i> Crear Nuevo Producto
      </a>
    </div>
  </div>

  <div class="card shadow">
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead class="table-dark">
            <tr>
              <th>Imagen</th>
              <th>Nombre</th>
              <th>Precio</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            {% for product in products %}
              <tr>
                <td>
                  {% if product.image %}
                    <img src="{{ product.image }}" style="max-height: 50px;" alt="{{ product.name }}" class="img-thumbnail">
                  {% else %}
                    <img src="{% static 'img/no-image.png' %}" style="max-height: 50px;" alt="Sin imagen" class="img-thumbnail">
                  {% endif %}
                </td>
                <td>{{ product.name }}</td>
                <td>${{ product.price }}</td>
                <td>
                  <div class="btn-group" role="group">
                    <a href="{% url 'update-product' product.pk %}" class="btn btn-sm btn-primary">
                      <i class="fas fa-edit"></i> Editar
                    </a>
                    <form method="POST" action="" style="display: inline;">
                      {% csrf_token %}
                      <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('¿Estás seguro de eliminar este producto?')">
                        <i class="fas fa-trash-alt"></i> Eliminar
                      </button>
                    </form>
                  </div>
                </td>
              </tr>
            {% empty %}
              <tr>
                <td colspan="4" class="text-center py-4">No hay productos disponibles.</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<style>
  .main-content {
    margin-left: 280px; /* Igual al ancho del sidebar */
    padding: 20px;
  }
  
  .sidebar {
    position: fixed;
    height: 100%;
    top: 0;
    left: 0;
  }
  
  @media (max-width: 768px) {
    .main-content {
      margin-left: 0;
    }
    
    .sidebar {
      width: 100%;
      position: relative;
    }
  }
</style>
{% endblock %}