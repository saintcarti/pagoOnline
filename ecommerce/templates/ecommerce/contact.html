{% extends 'base.html' %}
{% load static %}

{% block content %}
<section class="contact-section">
  <div class="contact-header">
    <h1>Estamos aquí para ayudarte</h1>
    <p>Contáctanos o visita cualquiera de nuestras sucursales a lo largo del país.</p>
  </div>

  <div class="contact-grid">
    <!-- Formulario de Contacto -->
    <div class="form-box">
      {% if messages %}
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }}">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}

      {% if not form_submitted %}
      <form method="post" novalidate>
        {% csrf_token %}
        <h2>Formulario de Contacto</h2>

        <!-- Campo Nombre -->
        <div class="form-group">
          <label for="id_name">Nombre completo</label>
          <input type="text" id="id_name" name="name" 
                 value="{{ form_data.name|default:'' }}" required>
          {% if form_errors.name %}
            <div class="error">{{ form_errors.name }}</div>
          {% endif %}
        </div>

        <!-- Campo Email -->
        <div class="form-group">
          <label for="id_email">Correo electrónico</label>
          <input type="email" id="id_email" name="email" 
                 value="{{ form_data.email|default:'' }}" required>
          {% if form_errors.email %}
            <div class="error">{{ form_errors.email }}</div>
          {% endif %}
        </div>

        <!-- Campo Teléfono -->
        <div class="form-group">
          <label for="id_phone">Teléfono</label>
          <input type="tel" id="id_phone" name="phone" 
                 value="{{ form_data.phone|default:'' }}" 
                 pattern="[0-9]{9,10}" required>
          {% if form_errors.phone %}
            <div class="error">{{ form_errors.phone }}</div>
          {% endif %}
        </div>

        <!-- Campo Motivo -->
        <div class="form-group">
          <label for="id_reason">Motivo</label>
          <select id="id_reason" name="reason" required>
            <option value="" disabled selected>Seleccione una opción</option>
            <option value="ventas" {% if form_data.reason == 'ventas' %}selected{% endif %}>Consulta de productos</option>
            <option value="soporte" {% if form_data.reason == 'soporte' %}selected{% endif %}>Soporte técnico</option>
            <option value="reclamo" {% if form_data.reason == 'reclamo' %}selected{% endif %}>Reclamo</option>
            <option value="otro" {% if form_data.reason == 'otro' %}selected{% endif %}>Otro</option>
          </select>
          {% if form_errors.reason %}
            <div class="error">{{ form_errors.reason }}</div>
          {% endif %}
        </div>

        <!-- Campo Mensaje -->
        <div class="form-group">
          <label for="id_message">Mensaje</label>
          <textarea id="id_message" name="message" required>{{ form_data.message|default:'' }}</textarea>
          {% if form_errors.message %}
            <div class="error">{{ form_errors.message }}</div>
          {% endif %}
        </div>

        <button type="submit" class="btn-primary">Enviar mensaje</button>
      </form>
      {% else %}
        <div class="thank-you-message">
          <h3>¡Gracias por tu mensaje!</h3>
          <p>Nos pondremos en contacto contigo muy pronto.</p>
          <a href="{% url 'contact' %}" class="btn-link">Enviar otro mensaje</a>
        </div>
      {% endif %}
    </div>

    <!-- Sucursales (Contenido estático) -->
    <div class="branches-box">
      <h2>Nuestras Sucursales</h2>
      <div class="branches-grid">
        <!-- Sucursal 1 -->
        <div class="branch-card">
          <img src="{% static 'images/sucursal1.jpeg' %}" alt="Sucursal Central Santiago">
          <div class="branch-info">
            <h3>Sucursal Central Santiago</h3>
            <p><strong>Dirección:</strong> Av. Libertador Bernardo O'Higgins 2450, Santiago Centro</p>
            <p><strong>Teléfono:</strong> +56 2 2987 1234</p>
            <p><strong>Horario:</strong> Lunes a Sábado, 9:00 - 18:00</p>
            <a class="btn-link" href="mailto:santiago@ferremax.cl">Contactar</a>
          </div>
        </div>
        
        <!-- Sucursal 2 -->
        <div class="branch-card">
          <img src="{% static 'images/sucursal2.jpeg' %}" alt="Sucursal Maipú">
          <div class="branch-info">
            <h3>Sucursal Maipú</h3>
            <p><strong>Dirección:</strong> Camino a Melipilla 12345, Maipú, Santiago</p>
            <p><strong>Teléfono:</strong> +56 2 2345 6789</p>
            <p><strong>Horario:</strong> Lunes a Sábado, 9:00 - 18:00</p>
            <a class="btn-link" href="mailto:maipu@ferremax.cl">Contactar</a>
          </div>
        </div>
        
        <!-- Agrega más sucursales según sea necesario -->
      </div>
    </div>
  </div>
</section>
{% endblock %}